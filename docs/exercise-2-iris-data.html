<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>3 Exercise 2: Iris data | STATS5099 Data Mining and Machine Learning</title>
  <meta name="description" content="3 Exercise 2: Iris data | STATS5099 Data Mining and Machine Learning" />
  <meta name="generator" content="bookdown 0.31 and GitBook 2.6.7" />

  <meta property="og:title" content="3 Exercise 2: Iris data | STATS5099 Data Mining and Machine Learning" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3 Exercise 2: Iris data | STATS5099 Data Mining and Machine Learning" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="exercise-1-usarrests.html"/>

<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
<link rel="stylesheet" href="include/webex.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Welcome to DMML Lab 9</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#k-means"><i class="fa fa-check"></i><b>1.1</b> K-means</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#k-medoids"><i class="fa fa-check"></i><b>1.2</b> K-medoids</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="exercise-1-usarrests.html"><a href="exercise-1-usarrests.html"><i class="fa fa-check"></i><b>2</b> Exercise 1: USArrests</a></li>
<li class="chapter" data-level="3" data-path="exercise-2-iris-data.html"><a href="exercise-2-iris-data.html"><i class="fa fa-check"></i><b>3</b> Exercise 2: Iris data</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">STATS5099 Data Mining and Machine Learning</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="exercise-2-iris-data" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">3</span> Exercise 2: Iris data<a href="exercise-2-iris-data.html#exercise-2-iris-data" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>In Lab 3, we studied the <code>Iris</code> flower data which contain measurements of the length and the width of sepals and petals for three species of Iris. For this exercise, we temporarily ignore the species information and perform <span class="math inline">\(K\)</span>-medoids clustering.</p>
<p><strong>QUESTION</strong>:</p>
<ol style="list-style-type: decimal">
<li>Perform <span class="math inline">\(K\)</span>-medoids clustering with <span class="math inline">\(K=3\)</span>, first using the Euclidean distance and then using the Manhattan distance. Visualise the clusters using both <code>plot</code> and <code>clusplot</code>.</li>
</ol>
<div class="webex-solution">
<button>
Solution
</button>
<p>Suppose we would like to group the data into 3 clusters. The corresponding <code>R</code> code is:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="exercise-2-iris-data.html#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1</span>)</span>
<span id="cb14-2"><a href="exercise-2-iris-data.html#cb14-2" aria-hidden="true" tabindex="-1"></a>Iris <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">scale</span>(iris[,<span class="sc">-</span><span class="dv">5</span>]))</span>
<span id="cb14-3"><a href="exercise-2-iris-data.html#cb14-3" aria-hidden="true" tabindex="-1"></a>Iris_pam.E <span class="ot">&lt;-</span> <span class="fu">pam</span>(Iris, <span class="at">k=</span><span class="dv">3</span>, <span class="at">metric=</span><span class="st">&quot;euclidean&quot;</span>, <span class="at">nstart=</span><span class="dv">100</span>)</span>
<span id="cb14-4"><a href="exercise-2-iris-data.html#cb14-4" aria-hidden="true" tabindex="-1"></a>Iris_pam.M <span class="ot">&lt;-</span> <span class="fu">pam</span>(Iris, <span class="at">k=</span><span class="dv">3</span>, <span class="at">metric=</span><span class="st">&quot;manhattan&quot;</span>, <span class="at">nstart=</span><span class="dv">100</span>)</span>
<span id="cb14-5"><a href="exercise-2-iris-data.html#cb14-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-6"><a href="exercise-2-iris-data.html#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb14-7"><a href="exercise-2-iris-data.html#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(Iris, <span class="at">col=</span>Iris_pam.E<span class="sc">$</span>clustering)</span></code></pre></div>
<p><img src="main_files/figure-html/unnamed-chunk-15-1.png" width="576" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="exercise-2-iris-data.html#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(Iris, <span class="at">col=</span>Iris_pam.M<span class="sc">$</span>clustering)</span></code></pre></div>
<p><img src="main_files/figure-html/unnamed-chunk-15-2.png" width="576" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="exercise-2-iris-data.html#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># clusplot</span></span>
<span id="cb16-2"><a href="exercise-2-iris-data.html#cb16-2" aria-hidden="true" tabindex="-1"></a>Iris_cl.E <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(Iris, Iris_pam.E<span class="sc">$</span>clustering)</span>
<span id="cb16-3"><a href="exercise-2-iris-data.html#cb16-3" aria-hidden="true" tabindex="-1"></a>Iris_cl.M <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(Iris, Iris_pam.M<span class="sc">$</span>clustering)</span>
<span id="cb16-4"><a href="exercise-2-iris-data.html#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="fu">clusplot</span>(Iris_cl.E, Iris_pam.E<span class="sc">$</span>clustering, <span class="at">color=</span><span class="cn">TRUE</span>, <span class="at">shade=</span><span class="cn">TRUE</span>,</span>
<span id="cb16-5"><a href="exercise-2-iris-data.html#cb16-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">labels=</span><span class="dv">2</span>, <span class="at">lines=</span><span class="dv">0</span>)</span></code></pre></div>
<p><img src="main_files/figure-html/unnamed-chunk-15-3.png" width="576" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="exercise-2-iris-data.html#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">clusplot</span>(Iris_cl.M, Iris_pam.M<span class="sc">$</span>clustering, <span class="at">color=</span><span class="cn">TRUE</span>, <span class="at">shade=</span><span class="cn">TRUE</span>,</span>
<span id="cb17-2"><a href="exercise-2-iris-data.html#cb17-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">labels=</span><span class="dv">2</span>, <span class="at">lines=</span><span class="dv">0</span>)</span></code></pre></div>
<p><img src="main_files/figure-html/unnamed-chunk-15-4.png" width="576" style="display: block; margin: auto;" /></p>
</div>
<ol start="2" style="list-style-type: decimal">
<li>Use the average silhouette width to determine which clustering performance is better.</li>
</ol>
<div class="webex-solution">
<button>
Solution
</button>
<p>The silhouette information has already been computed in <code>pam</code> and can be accessed using <code>silinfo</code> (and <code>avg.width</code> for average silhouette width).</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="exercise-2-iris-data.html#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">c</span>(Iris_pam.E<span class="sc">$</span>silinfo<span class="sc">$</span>avg.width,Iris_pam.M<span class="sc">$</span>silinfo<span class="sc">$</span>avg.width))</span></code></pre></div>
<pre><code>## [1] 0.4507912 0.4957301</code></pre>
<p>As higher average silhouette width suggests better clustering, we would prefer the results obtained from <span class="math inline">\(K\)</span>-medoids with the Manhattan distance.</p>
</div>
<ol start="3" style="list-style-type: decimal">
<li>(optional) Compare the clustering assignment with the ground-truth species type. Which clustering method generates more consistent labels?</li>
</ol>
<div class="webex-solution">
<button>
Solution
</button>
<p>Again, we can use the corrected Rand index to compare the similarity between two sets of labels.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="exercise-2-iris-data.html#cb20-1" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">dist</span>(Iris)</span>
<span id="cb20-2"><a href="exercise-2-iris-data.html#cb20-2" aria-hidden="true" tabindex="-1"></a>cl.E.stats <span class="ot">&lt;-</span> <span class="fu">cluster.stats</span>(d, Iris_pam.E<span class="sc">$</span>clustering, <span class="fu">as.numeric</span>(iris<span class="sc">$</span>Species))</span>
<span id="cb20-3"><a href="exercise-2-iris-data.html#cb20-3" aria-hidden="true" tabindex="-1"></a>cl.M.stats <span class="ot">&lt;-</span> <span class="fu">cluster.stats</span>(d, Iris_pam.M<span class="sc">$</span>clustering, <span class="fu">as.numeric</span>(iris<span class="sc">$</span>Species))</span>
<span id="cb20-4"><a href="exercise-2-iris-data.html#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">c</span>(cl.E.stats<span class="sc">$</span>corrected.rand, cl.M.stats<span class="sc">$</span>corrected.rand))</span></code></pre></div>
<pre><code>## [1] 0.6764545 0.7021066</code></pre>
<p>As higher value suggests more points are assigned to the same cluster, we would prefer <span class="math inline">\(K\)</span>-medoids with the Manhattan distance.</p>
</div>

</div>
<script>

/* update total correct if #webex-total_correct exists */
update_total_correct = function() {
  console.log("webex: update total_correct");

  if (t = document.getElementById("webex-total_correct")) {
    var correct = document.getElementsByClassName("webex-correct").length;
    var solvemes = document.getElementsByClassName("webex-solveme").length;
    var radiogroups = document.getElementsByClassName("webex-radiogroup").length;
    var selects = document.getElementsByClassName("webex-select").length;
    
    t.innerHTML = correct + " of " + (solvemes + radiogroups + selects) + " correct";
  }
}

/* webex-solution button toggling function */
b_func = function() {
  console.log("webex: toggle hide");
  
  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  console.log("webex: check solveme");

  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "")
  }

  if (my_answer == "") {
    cl.remove("webex-correct");
    cl.remove("webex-incorrect");
  } else if (real_answers.includes(my_answer)) {
    cl.add("webex-correct");
    cl.remove("webex-incorrect");
  } else {
    cl.add("webex-incorrect");
    cl.remove("webex-correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol > 0){
    var tol = JSON.parse(this.dataset.tol);
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("webex-correct");
    } else {
      cl.remove("webex-correct");
    }
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("webex-correct");
    }
  }

  update_total_correct();
}

/* function for checking select answers */
select_func = function(e) {
  console.log("webex: check select");
  
  var cl = this.classList
  
  /* add style */
  cl.remove("webex-incorrect");
  cl.remove("webex-correct");
  if (this.value == "answer") {
    cl.add("webex-correct");
  } else if (this.value != "blank") {
    cl.add("webex-incorrect");
  }
  
  update_total_correct();
}

/* function for checking radiogroups answers */
radiogroups_func = function(e) {
  console.log("webex: check radiogroups");

  var checked_button = document.querySelector('input[name=' + this.id + ']:checked');
  var cl = checked_button.parentElement.classList;
  var labels = checked_button.parentElement.parentElement.children;
  
  /* get rid of styles */
  for (i = 0; i < labels.length; i++) {
    labels[i].classList.remove("webex-incorrect");
    labels[i].classList.remove("webex-correct");
  }
  
  /* add style */
  if (checked_button.value == "answer") {
    cl.add("webex-correct");
  } else {
    cl.add("webex-incorrect");
  }
  
  update_total_correct();
}

window.onload = function() {
  console.log("onload");
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('webex-solution')) {
      buttons[i].onclick = b_func;
    }
  }

  /* set up webex-solveme inputs */
  var solveme = document.getElementsByClassName("webex-solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off");
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";

    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;

    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;
  }
  
  /* set up radiogroups */
  var radiogroups = document.getElementsByClassName("webex-radiogroup");
  for (var i = 0; i < radiogroups.length; i++) {
    radiogroups[i].onchange = radiogroups_func;
  }
  
  /* set up selects */
  var selects = document.getElementsByClassName("webex-select");
  for (var i = 0; i < selects.length; i++) {
    selects[i].onchange = select_func;
  }

  update_total_correct();
}

</script>
            </section>

          </div>
        </div>
      </div>
<a href="exercise-1-usarrests.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["main.pdf", "main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"info": true
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
